<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ‹ã‚³ãƒªãƒ’ãƒˆ vs ã¤ã‚‹ã¤ã‚‹å› ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ãƒãƒˆãƒ«</title>
<link rel="icon" type="image/png" href="http://nikorihito.com/wp-content/uploads/2024/11/ãƒ‹ã‚³ãƒªãƒ’ãƒˆ.png">
<style>
  body { background: white; text-align: center; font-family: sans-serif; color: #333; padding: 20px; }
  img { width: 120px; margin: 10px; }
  .bar { width: 300px; height: 20px; background: #ddd; margin: 10px auto; position: relative; border-radius: 10px; overflow: hidden; }
  .inner { height: 100%; background: #4caf50; width: 100%; border-radius: 10px; transition: width 0.3s; }
  #word, #meaning { font-size: 24px; margin: 10px; }
  input { font-size: 20px; padding: 10px; width: 300px; }
  #result, #stats, #restart { margin-top: 20px; font-size: 20px; }
  button { font-size: 18px; padding: 10px 20px; margin: 20px; cursor: pointer; }
  #gameArea, #restart, #levelArea { display: none; }
  #nikoPointButton { display: none; margin-top: 10px; }
</style>
</head>
<body>

<h1>ãƒ‹ã‚³ãƒªãƒ’ãƒˆ vs ã¤ã‚‹ã¤ã‚‹å› ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ãƒãƒˆãƒ«</h1>

<div id="startArea">
  <button onclick="showLevels()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
</div>

<div id="levelArea">
  <h2>é›£æ˜“åº¦ã‚’é¸ã‚“ã§ãã ã•ã„</h2>
  <button onclick="startGame('easy')">ç°¡å˜</button>
  <button onclick="startGame('normal')">æ™®é€š</button>
  <button onclick="startGame('hard')">é›£ã—ã„</button>
</div>

<div id="gameArea">
  <div>
    <img src="http://nikorihito.com/wp-content/uploads/2024/11/ãƒ‹ã‚³ãƒªãƒ’ãƒˆ.png" alt="ãƒ‹ã‚³ãƒªãƒ’ãƒˆ">
    <img src="http://nikorihito.com/wp-content/uploads/2024/11/ã¤ã‚‹ã¤ã‚‹å›.png" alt="ã¤ã‚‹ã¤ã‚‹å›">
  </div>
  <div>
    ãƒ‹ã‚³ãƒªãƒ’ãƒˆ HP
    <div class="bar"><div id="playerHP" class="inner"></div></div>
    ãƒ‹ã‚³ãƒªãƒã‚¤ãƒ³ãƒˆ
    <div class="bar"><div id="nikoPoint" class="inner"></div></div>
    ã¤ã‚‹ã¤ã‚‹å› HP
    <div class="bar"><div id="npcHP" class="inner"></div></div>
  </div>
  <div id="meaning">æ„å‘³ï¼š---</div>
  <div id="word">æº–å‚™ä¸­...</div>
  <input type="text" id="input" placeholder="ã“ã“ã«å…¥åŠ›" disabled>
</div>

<div id="result"></div>
<div id="stats"></div>
<div id="restart">
  <button onclick="init()">å†åº¦æŒ‘æˆ¦</button>
</div>

<script>
const words = {
  easy: [
    { en: "I am", ja: "ç§ã¯ã€œã§ã™" },
    { en: "You are", ja: "ã‚ãªãŸã¯ã€œã§ã™" },
    { en: "He is", ja: "å½¼ã¯ã€œã§ã™" },
    { en: "It is", ja: "ãã‚Œã¯ã€œã§ã™" },
    { en: "We are", ja: "ç§ãŸã¡ã¯ã€œã§ã™" },
    { en: "They are", ja: "å½¼ã‚‰ã¯ã€œã§ã™" },
    { en: "I like", ja: "ç§ã¯ã€œãŒå¥½ãã§ã™" },
    { en: "She likes", ja: "å½¼å¥³ã¯ã€œãŒå¥½ãã§ã™" }
  ],
  normal: [
    { en: "Do you play", ja: "ã‚ãªãŸã¯ã€œã‚’ã—ã¾ã™ã‹ï¼Ÿ" },
    { en: "Can you swim", ja: "ã‚ãªãŸã¯æ³³ã’ã¾ã™ã‹ï¼Ÿ" },
    { en: "Let's go", ja: "è¡Œãã¾ã—ã‚‡ã†" },
    { en: "Please open", ja: "é–‹ã‘ã¦ãã ã•ã„" },
    { en: "You must study", ja: "ã‚ãªãŸã¯å‹‰å¼·ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“" },
    { en: "Does he play", ja: "å½¼ã¯ã€œã‚’ã—ã¾ã™ã‹ï¼Ÿ" }
  ],
  hard: [
    { en: "I am studying", ja: "ç§ã¯å‹‰å¼·ã—ã¦ã„ã¾ã™" },
    { en: "He was running", ja: "å½¼ã¯èµ°ã£ã¦ã„ã¾ã—ãŸ" },
    { en: "We will go", ja: "ç§ãŸã¡ã¯è¡Œãã§ã—ã‚‡ã†" },
    { en: "She plays better", ja: "å½¼å¥³ã¯ã‚ˆã‚Šä¸Šæ‰‹ã«ãƒ—ãƒ¬ã‚¤ã—ã¾ã™" },
    { en: "If you can", ja: "ã‚‚ã—ã‚ãªãŸãŒã§ãã‚‹ãªã‚‰" },
    { en: "Because he was tired", ja: "å½¼ãŒç–²ã‚Œã¦ã„ãŸã®ã§" }
  ]
};

let currentWord = {};
let lastWord = {};
let startTime = 0;
let missCount = 0;
let playerHP = 20000;
let npcHP = 20000;
let nikoPoint = 0;
const maxNikoPoint = 100;
let npcInterval;
let selectedWords = [];
const input = document.getElementById("input");

function showLevels() {
  document.getElementById("startArea").style.display = "none";
  document.getElementById("levelArea").style.display = "block";
}

function startGame(level) {
  selectedWords = words[level];
  document.getElementById("levelArea").style.display = "none";
  document.getElementById("gameArea").style.display = "block";
  input.disabled = false;
  input.focus();
  nextWord();
  startTime = Date.now();
  missCount = 0;
  playerHP = 20000;
  npcHP = 20000;
  nikoPoint = 0;
  updateBars();
  npcInterval = setInterval(npcAttack, 1200);
}

function nextWord() {
  let newWord;
  do {
    newWord = selectedWords[Math.floor(Math.random() * selectedWords.length)];
  } while (newWord.en === lastWord.en);
  currentWord = newWord;
  lastWord = newWord;
  document.getElementById("word").textContent = currentWord.en;
  document.getElementById("meaning").textContent = "æ„å‘³: " + currentWord.ja;
  input.value = "";
}

input.addEventListener("beforeinput", (e) => {
  if (e.inputType === "insertText") {
    const typed = input.value + e.data;
    if (!currentWord.en.startsWith(typed)) {
      e.preventDefault();
      missCount++;
      playerHP -= 150;
      updateBars();
      if (playerHP <= 0) finishGame(false);
    }
  }
});

input.addEventListener("input", () => {
  const typed = input.value;
  if (typed === currentWord.en) {
    npcHP -= 300;
    nikoPoint += 20;
    if (nikoPoint >= maxNikoPoint) nikoPoint = maxNikoPoint;
    updateBars();
    if (npcHP <= 0) finishGame(true);
    else nextWord();
  }
});

function npcAttack() {
  playerHP -= 250;
  updateBars();
  if (playerHP <= 0) finishGame(false);
}

function updateBars() {
  document.getElementById("playerHP").style.width = (playerHP / 20000 * 100) + "%";
  document.getElementById("npcHP").style.width = (npcHP / 20000 * 100) + "%";
  document.getElementById("nikoPoint").style.width = (nikoPoint / maxNikoPoint * 100) + "%";
}

function finishGame(playerWon) {
  clearInterval(npcInterval);
  input.disabled = true;
  const timeTaken = ((Date.now() - startTime) / 1000).toFixed(2);
  document.getElementById("result").textContent = playerWon ? "ğŸ‰ ãƒ‹ã‚³ãƒªãƒ’ãƒˆã®å‹åˆ©ï¼" : "ğŸ˜¢ ã¤ã‚‹ã¤ã‚‹å›ã®å‹åˆ©...";
  document.getElementById("stats").innerHTML = `ã‚¿ã‚¤ãƒ ï¼š${timeTaken}ç§’<br>ãƒŸã‚¹æ•°ï¼š${missCount}å›`;
  document.getElementById("restart").style.display = "block";
}

function init() {
  document.getElementById("startArea").style.display = "block";
  document.getElementById("gameArea").style.display = "none";
  document.getElementById("levelArea").style.display = "none";
  document.getElementById("result").textContent = "";
  document.getElementById("stats").textContent = "";
  document.getElementById("restart").style.display = "none";
}

// å¿…æ®ºæŠ€: /ã‚­ãƒ¼æŠ¼ã—ãŸã‚‰ç™ºå‹•
window.addEventListener("keydown", (e) => {
  if (e.key === "/" && nikoPoint >= maxNikoPoint && !input.disabled) {
    npcHP -= 3000;
    nikoPoint = 0;
    updateBars();
    if (npcHP <= 0) finishGame(true);
  }
});
</script>

</body>
</html>
